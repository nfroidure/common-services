[//]: # ( )
[//]: # (This file is automatically generated by the `jsarch`)
[//]: # (module. Do not change it elsewhere, changes would)
[//]: # (be overriden.)
[//]: # ( )
# Architecture Notes

## Summary

1. [Services](#1-services)
   1. [Log](#11-log)
   2. [Time](#12-time)
   3. [Random](#13-random)
   4. [Delay](#14-delay)
   5. [Resolve](#15-resolve)
   6. [Importer](#16-importer)
   7. [Code generator](#17-code-generator)
   8. [Lock](#18-lock)
   9. [Counter](#19-counter)


## 1. Services

Since the services in this module are very common, we
 provide a helper to import them all with a single
 line of code.

Their goal is to encapsulate unpredictible states and
 inputs/outputs of the software they are part of. They
 are primarily meant to be used with
 [`knifecycle`](https://github.com/nfroidure/knifecycle)
 but should be usable with any DI system or even rawly.

[See in context](./src/index.ts#L1-L12)



### 1.1. Log

I prefer using a unique function with the `log` type
 in parameter instead of several methods for each
 log types. It is far easyer to mock and to assert
 on logs in my tests.

If provided, I route debug messages to the `debug`
 node module.

[See in context](./src/services/log.ts#L53-L63)



### 1.2. Time

The `time` service is just proxying [`Date.now`
](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Date/now)
 in a stubbable manner.

[See in context](./src/services/time.ts#L9-L14)



### 1.3. Random

The `random` service is just proxying [`Math.random`
](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Math/random)
 in a stubbable manner.

[See in context](./src/services/random.ts#L9-L14)



### 1.4. Delay

The `delay` service is `setTimeout` like I would like it
 to be.

[See in context](./src/services/delay.ts#L15-L19)



### 1.5. Resolve

The `resolve` service is just proxying [`import.meta.resolve`
](https://developer.mozilla.org/fr/docs/Web/JavaScript/Reference/Operators/import.meta/resolve)
 in a stubbable manner.

[See in context](./src/services/resolve.ts#L5-L10)



### 1.6. Importer

The `importer` service is just proxying [`import`
](https://developer.mozilla.org/fr/docs/Web/JavaScript/Reference/Operators/import)
 in a stubbable manner.

[See in context](./src/services/importer.ts#L6-L11)



### 1.7. Code generator

The `codeGenerator` service provide a service
 that generate random strings composed of
 a character set that avoid recognition
 mistake by humans.

It generates codes that contains only easily
 recognizable chars (by example, no `0` nor `O`).

[See in context](./src/services/codeGenerator.ts#L17-L26)



### 1.8. Lock

The `lock` service allows to maintain a lock on a given
 resource in order to ensure a sequential access to it in
 asynchronous code.

The release is done by its key and the current lock is removed. There
 is no check on the fact the lock is well released. By design, it is
 your responsibility to ensure you release the locks properly. That
 said, it should not be hard to handle since the actual behavior of
 the library makes your code run sequentially.

[See in context](./src/services/lock.ts#L27-L38)



### 1.9. Counter

The `counter` service provide a simple, local and
 stubbable counter.

The count are returned asynchronously in order
 to be easily maintained across several instances
 if needed later via another service with the same
 surface API.

[See in context](./src/services/counter.ts#L20-L29)

